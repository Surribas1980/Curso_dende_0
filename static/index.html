<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/estilo.css" rel="stylesheet">
        <title>
            Inicio
        </title>
    </head>
    <body>
        <header>
            <div>
                <h1>PÃ¡xina de entrada de lista de tarefas</h1>
                
            </div>
        </header>
        <main>
            <form action="/paxinaDEntrada" method="post">
      				  <div class="dentro-do-form">
      				    <label for="dice"> Nome : </label>
      				    <input name="decir" id="decir" value="...introduce nome">
      				  </div>
      				  <div class="dentro-do-form">
      				    <label for="para"> Contrasinal :</label>
      				    <input name="a" value="introduce contrasinal">
      				  </div>
                <!--<div>
                  <input type="file" onchange="previewFile()" />
                  <img src="" height="200" alt="Image preview..." />
                </div>-->
      				  <div>
      				    <button>enviar</button>
      				  </div>
      			</form>

          <!--<form id="formElem">
            <input type="text" name="name" value="John">
            <input type="text" name="surname" value="Smith">
            <input type="submit">
          </form>-->
            
        </main>
      
        <script>
              function previewFile() {
                const preview = document.querySelector("img");
                const file = document.querySelector("input[type=file]").files[0];
                const reader = new FileReader();
              
                reader.addEventListener(
                  "load",
                  function () {
                    // convierte la imagen a una cadena en base64
                    preview.src = reader.result;
                  },
                  false,
                );
              
                if (file) {
                  reader.readAsDataURL(file);
                }
              }


               formElem.onsubmit = async (e) => {
                e.preventDefault();
                let datos = new FormData(formElem);

                 console.log('datos: ',datos.entries)
                let response = await fetch('/novo', {
                  method: 'POST',
                  body: new FormData(formElem)
                });
            
                let result = await response.json();
            
                console.log(result.message,result);
              };

            

        </script>
    </body>
</html>